---
title: "【ROS入门笔记】用“搭乐高”的方式，彻底搞懂ROS是什么"
date: 2025-09-04T12:00:00+08:00
draft: false
tags: ["ROS", "入门", "核心概念", "WSL", "Ubuntu", "安装教程"]
author: "Hambmark"
description: "一篇写给纯小白的ROS入门指南。通过一个贯穿全文的“乐高积木”比喻，生动解读ROS的核心概念，并附上在WSL Ubuntu 24.04上安装ROS2 Jazzy的完整步骤。"
---

## 前言

你好，欢迎来到我的 ROS 学习笔记！作为一个刚刚踏入机器人世界的小白，我深知那些晦涩的术语有多么劝退。在查阅了大量资料后，我发现用“搭乐高积木”来比喻 ROS，简直是打开新世界大门的钥匙。

这篇文章将分为两部分：

1.  **第一部分：** 我将用这个乐高比喻，带你轻松理解 ROS 最核心的几个概念。
2.  **第二部分：** 我将记录下在 WSL (Windows Subsystem for Linux) 环境下，从零开始安装并成功运行 ROS 2 的全过程。

希望这篇笔记能帮助到像我一样正在起步的你。

---

## Part 1: 认识 ROS——机器人世界的“乐高标准”

首先，**ROS (Robot Operating System) 是一个机器人开发的“框架”**。它的目标，就是让编写机器人软件程序变得更简单、更模块化。

想象一下，你面前有一大堆散落的乐高零件，你的目标是拼出一个能自动驾驶的乐高小车。如果没有一个统一的标准，这件事会非常困难。A 厂的轮子可能插不到 B 厂的底盘上，C 厂的马达接口和 D 厂的电池又不匹配。

在这个比喻里，**ROS 就是“乐高积木”这套伟大的发明本身——它是一套通用的“拼插标准”和“蓝图系统”**。

它解决了硬件驱动的难题。不同的机器人可能用的是不同品牌、不同型号的摄像头、激光雷达或电机。如果没有 ROS，你每换一个硬件，就得重写一次驱动和接口代码。而 ROS 提供了一个统一、标准的接口层。你只需要关心如何从标准的 `/image` 话题获取图像，而无需关心这个图像到底是来自罗技摄像头还是奥比中光摄像头。ROS 的驱动节点帮你处理了这些硬件差异。

现在，我们继续用乐高的例子，来拆解 ROS 的核心概念。

### 1. 节点 (Node) → 功能单一的“特殊积木块”

在你的乐高盒子里，除了普通的红砖蓝砖，还有一些非常酷的特殊积木块，它们各自只有一个功能：

- 一块 **“摄像头积木”**：它上面有个小镜头，它的唯一工作就是“看”，把看到的画面变成一种标准信号。
- 一块 **“马达积木”**：它带着轮子，它的唯一工作就是接收标准信号，然后控制轮子转动。
- 一块 **“雷达积木”**：它会旋转，它的唯一工作就是探测前方积木的距离，并把距离数据变成标准信号。
- 一块 **“电脑核心积木”**：它负责思考，根据收到的信号，发出指令信号。

在 ROS 里，每一个这样的功能单一的“特殊积木块”，就是一个**节点 (Node)**。ROS 的理念就是，把一个复杂的机器人，拆解成一堆这样简单的、只做一件事的节点。

### 2. 话题 (Topic) → 积木上标准的“凸点”和“凹槽”

这些特殊积木块是怎么连接和沟通的呢？答案就是乐高最经典的**凸点 (Publish)** 和 **凹槽 (Subscribe)**。

想象一下：

- “摄像头积木”有一个蓝色的**凸点**，它会不停地把最新的“画面信号”放到这个凸点上。这就是 **发布 (Publish)**。
- “电脑核心积木”上有一个蓝色的**凹槽**，它会不停地从这个凹槽里读取“画面信号”。这就是 **订阅 (Subscribe)**。

只要颜色/形状对得上，你就可以把任何带蓝色凹槽的积木，插到任何带蓝色凸点的积木上。

**优点：** 摄像头积木才不关心是谁在用它的画面信号，它只管不停地发布。你可以同时插上好几个带蓝色凹槽的积木（比如一个用于识别红绿灯，一个用于人脸识别），它们都能收到画面。

在 ROS 里，这种最常用的、像广播一样、通过标准接口持续不断传输数据的方式，就是**话题 (Topic)**。

### 3. 服务 (Service) → 积木上的“按钮”和“弹射器”

有些积木的交互不是持续的。比如，你有一块“电池积木”，你想知道它还剩多少电。

这块“电池积木”上没有凸点，而是有一个**按钮**。

1.  “电脑核心积木”伸出一根小杆，按一下这个按钮，发出一个**请求 (Request)**。
2.  “电池积木”内部立刻计算一下，然后从侧面的一个“弹射器”里，弹出一个写着“78%”的牌子作为**响应 (Response)**。

在“电脑核心积木”按下按钮到牌子弹出来之前，它会停在那里等待。

在 ROS 里，这种**“我问，你答”**的一对一同步通信方式，就是**服务 (Service)**。

### 4. 动作 (Action) → 一套复杂的“齿轮联动装置”

现在，你想让“马达积木”驱动小车精确地前进 50 厘米。这不是一瞬间能完成的。

你需要一套预先搭好的“齿轮联动装置”：

1.  你先给它一个**目标 (Goal)**：一个写着“50cm”的牌子。
2.  这套装置开始转动，驱动小车前进。同时，其中一个齿轮会带动一个进度指针，让你随时能看到“已前进 10cm”、“已前进 20cm”…… 这就是**反馈 (Feedback)**。
3.  你可以随时按下装置上的一个红色急停按钮，来**取消**这个任务。
4.  当指针走到 50cm 时，装置会摇响一个小铃铛，告诉你**结果 (Result)**。

在 ROS 里，这种用于执行耗时较长、需要过程反馈、且可以中途取消的复杂任务的通信方式，就是**动作 (Action)**。

---

## Part 2: 实战！在 WSL 上安装并运行 ROS 2

理论讲完了，让我们动手实践一下吧！

**我的配置环境:** WSL (Windows Subsystem for Linux) / Ubuntu 24.04 LTS

### 步骤一：配置系统环境

首先，打开你的 WSL Ubuntu 终端，输入以下命令来配置系统区域，确保 ROS 不会出现编码问题。

# 更新并安装 locales 工具

sudo apt update && sudo apt install locales

# 生成并设置默认 locale 为美式英语 UTF-8

sudo locale-gen en_US en_US.UTF-8
sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8

- **作用:** 配置系统以支持标准的 UTF-8 字符编码，防止在编译或运行时出现乱码或解析错误。

### 步骤二：添加 ROS 2 官方软件源

接下来，让我们的系统知道去哪里下载 ROS 2。

# 1. 确保 Ubuntu 的 universe 仓库已启用

sudo add-apt-repository universe

# 2. 下载并添加 ROS 2 的 GPG 安全密钥，用于验证软件包的真实性

sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

# 3. 将 ROS 2 的下载地址添加到系统源列表

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null

# 4. 更新软件包列表，使新添加的源生效

sudo apt update

### 步骤三：安装 ROS 2 及核心工具

万事俱备，现在正式安装 ROS 2 Jazzy Jalisco！

# 安装 ROS 2 桌面完整版 (包含 RViz, Gazebo 等)

sudo apt install ros-jazzy-desktop

安装完成后，配置环境并安装一些必不可少的开发工具。

# 自动加载 ROS 2 环境，这样每次打开新终端都无需手动 source

echo "source /opt/ros/jazzy/setup.bash" >> ~/.bashrc

# 安装 rosdep 依赖管理工具

sudo apt install python3-rosdep

# 初始化 rosdep (首次使用需要)

sudo rosdep init
rosdep update

# 安装 colcon 编译工具

sudo apt install python3-colcon-common-extensions

- **`rosdep`**: 自动安装 ROS 功能包所依赖的系统库，是团队协作和复用他人代码的利器。
- **`colcon`**: ROS 2 官方的构建系统，当你开始编写自己的代码时，会用它来编译项目。

### 步骤四：运行经典示例——小乌龟！

是时候检验成果了！我们将运行 ROS 2 最经典的入门示例。

1.  打开**第一个 WSL 终端**，输入以下命令启动模拟器：

    ros2 run turtlesim turtlesim_node

    **预期效果：** 一个蓝色背景、中间有一只小乌龟的图形窗口会自动弹出。

2.  **保持第一个终端和窗口不关闭，打开第二个 WSL 终端**，输入以下命令启动键盘控制器：

    ros2 run turtlesim turtle_teleop_key

    **预期效果：** 这个终端会提示 "Reading from keyboard..."。

3.  用鼠标**点击第二个终端窗口**，使其成为活动窗口。
4.  按下键盘的**方向键（↑，↓，←，→）**。

现在看看你的小乌龟窗口，它是不是已经听你指挥，开始愉快地画画了？如果是，那么恭喜你，已经成功迈出了进入 ROS 世界的第一步！
